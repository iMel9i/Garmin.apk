# –ü–ª–∞–Ω: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å—Ç—Ä–µ–ª–æ–∫ –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç

## ‚úÖ –°–¥–µ–ª–∞–Ω–æ
- [x] –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å—Ç—Ä–µ–ª–æ–∫ –∏–∑ GoogleMaps_HUD
- [x] –°–æ–∑–¥–∞–Ω `ArrowRecognition.kt` —Å –∫–ª–∞—Å—Å–∞–º–∏ `ArrowImage` –∏ `ArrowDirection`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω `NavigationAccessibilityService` –¥–ª—è –ø–æ–∏—Å–∫–∞ ImageView
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± ImageView

## üîç –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –®–∞–≥ 1: –ù–∞–π—Ç–∏ resource-id —Å—Ç—Ä–µ–ª–∫–∏ –≤ –Ø–Ω–¥–µ–∫—Å–µ
**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°–æ–±—Ä–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í–∫–ª—é—á–∏—Ç—å AccessibilityService –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Android
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã —Å –∞–∫—Ç–∏–≤–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
4. –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏: `adb logcat | grep "ImageView node"`
5. –ù–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π resource-id —Å—Ç—Ä–µ–ª–∫–∏

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –≤ –ª–æ–≥–∞—Ö:**
```
ImageView node: className=android.widget.ImageView, 
                viewId=ru.yandex.yandexmaps:id/maneuver_icon, 
                contentDesc=Turn left, 
                text=null
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å resource-id –≤ AppConfigManager
–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –Ω–∞–π–¥–µ—Ç–µ ID —Å—Ç—Ä–µ–ª–∫–∏, –¥–æ–±–∞–≤–∏—Ç—å –≤ –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```kotlin
HudDataType.NAVIGATION_INSTRUCTION.name to "ru.yandex.yandexmaps:id/maneuver_icon"
```

### –®–∞–≥ 3: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Bitmap –∏–∑ ImageView
**–ü—Ä–æ–±–ª–µ–º–∞:** AccessibilityNodeInfo –Ω–µ –¥–∞–µ—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Drawable

**–†–µ—à–µ–Ω–∏—è:**
1. **–í–∞—Ä–∏–∞–Ω—Ç A: Screenshot —Ä–µ–≥–∏–æ–Ω–∞** (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Å–ª–æ–∂–Ω–æ)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MediaProjection API
   - –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç –æ–±–ª–∞—Å—Ç–∏ node.getBoundsInScreen()
   - –í—ã—Ä–µ–∑–∞—Ç—å –Ω—É–∂–Ω—ã–π –∫—É—Å–æ–∫
   
2. **–í–∞—Ä–∏–∞–Ω—Ç B: Reflection** (—Ö–∞–∫, –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö Android)
   - –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–ª—É—á–∏—Ç—å View —á–µ—Ä–µ–∑ reflection
   - –ò–∑–≤–ª–µ—á—å Drawable
   
3. **–í–∞—Ä–∏–∞–Ω—Ç C: –°–æ–±—Ä–∞—Ç—å —ç—Ç–∞–ª–æ–Ω—ã –¥–ª—è –Ø–Ω–¥–µ–∫—Å–∞**
   - –í—Ä—É—á–Ω—É—é —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–µ–ª–∫–∏ –Ø–Ω–¥–µ–∫—Å–∞
   - –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–¥—Ö–æ–¥: —Ö—Ä–∞–Ω–∏—Ç—å —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ Bitmap
   - –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø–æ hash –∏–ª–∏ pixel-by-pixel

### –®–∞–≥ 4: –î–ª—è Google Maps - –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ Notification –ø–∞—Ä—Å–∏–Ω–≥
–ò–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –ø–∞—Ä—Å–∏–Ω–≥–∞ `BigPictureStyle`.

**–§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:**
- `GoogleMaps_HUD/gmaps_hud/src/main/java/sky4s/garminhud/NotificationMonitor.java`

**–ß—Ç–æ —Ç–∞–º –¥–µ–ª–∞—é—Ç:**
1. –õ–æ–≤—è—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç Google Maps
2. –ò–∑–≤–ª–µ–∫–∞—é—Ç `notification.extras.getParcelable("android.largeIcon")`
3. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç –≤ Bitmap
4. –†–∞—Å–ø–æ–∑–Ω–∞—é—Ç —á–µ—Ä–µ–∑ `ArrowImage`

## üìù –ó–∞–º–µ—Ç–∫–∏

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- AccessibilityService **–≤–∏–¥–∏—Ç** ImageView
- –ù–æ **–Ω–µ –º–æ–∂–µ—Ç –∏–∑–≤–ª–µ—á—å** Bitmap –Ω–∞–ø—Ä—è–º—É—é

### –†–µ—à–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏: —á—Ç–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –¥–ª—è ImageView
3. –ï—Å–ª–∏ –≤ `contentDescription` –µ—Å—Ç—å —Ç–µ–∫—Å—Ç ("Turn left", "–ù–∞–ª–µ–≤–æ") - –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –µ–≥–æ
4. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º Bitmap

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
- –ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å MediaProjection –¥–ª—è screenshot
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å NotificationListener (–Ω–æ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–≤–µ—Ä–Ω—É—Ç–æ)

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç

**–°–µ–π—á–∞—Å —Ç–µ—Å—Ç–∏—Ä—É–µ–º:**
1. –°–æ–±—Ä–∞—Ç—å APK
2. –í–∫–ª—é—á–∏—Ç—å Accessibility
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã
4. –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
5. –ù–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π resource-id

**–ü–æ—Ç–æ–º —Ä–µ—à–∏–º:**
- –ö–∞–∫ –∏–∑–≤–ª–µ–∫–∞—Ç—å Bitmap
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å contentDescription –∫–∞–∫ fallback
